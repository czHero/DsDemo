<!DOCTYPE html>
<html lang="en">
<head>
    {% load staticfiles %}
    <meta charset="UTF-8">
    <title>Datatable Demo</title>
    <link href="{% static 'bootstrap/css/bootstrap.min.css' %}" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="{% static 'datatables-1.10.13/media/css/dataTables.bootstrap.min.css' %}">
</head>
<body>

<div>
    <h1>datatables-前端分页</h1>
    <table class="table table-striped table-hover table-bordered NoNewline" id="table" cellspacing="0" width="100%">
        <thead>
        <tr>
            <th title="id" data="id"></th>
            <th title="组名称" data="name"></th>
            <th title="parent_id" data="parent_id"></th>
            <th title="编辑" data="id" width="100px"><a class="btn btn-sm blue tab_edit" param="data">确认</a></th>
        </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
</div>

<div>
    <h1>datatables-后段分页</h1>
    <table class="table table-striped table-hover table-bordered NoNewline" id="table1" cellspacing="0" width="100%">
        <thead>
        <tr>
            <th title="id" data="id"></th>
            <th title="组名称" data="name"></th>
            <th title="parent_id" data="parent_id"></th>
            <th title="编辑" data="id" width="100px"><a class="btn btn-sm blue tab_edit" param="data">确认</a></th>
        </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
</div>


<script type="text/javascript" src="{% static 'jquery.min.js' %}"></script>
<script type="text/javascript" src="{% static 'datatables-1.10.13/media/js/jquery.dataTables.min.js' %}"></script>
<script rel="text/javascript" href="{% static 'datatables-1.10.13/media/js/dataTables.bootstrap.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/common.js' %}"></script>

<script>
    $.ajaxSetup({
        data: {csrfmiddlewaretoken: '{{ csrf_token }}'},
        dataType: "json"
    });
    $(document).ready(function () {

        initDatatable();
    });

    function initDatatable() {
        mytable = initDataTable("#table", {
            "ajax": {
                url: "{% url 'group_lists' %}",
                "type": "POST",
                "data": function () {
                    // 传参数，过滤条件
                    return {
                        "p_sts": $('#select_sts').val(),
                        "workflow_id": $('#select_workflow').val(),
                        "batch_id": $('#select_batch').val()
                    };
                },
            },
            "select": {
                style: 'multi',
                selector: 'td:first-child'
            },
            "fontAllSelect": true,
            "dataTableName": 'mytable'
        });
        $("#table").delegate(".tab_edit", "click", function () {
            var id = $(this).attr("param");
            alert(id);
        });

    }


</script>

</body>
</html>